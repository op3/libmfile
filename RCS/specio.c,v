head	1.7;
access;
symbols;
locks;
comment	@ * @;


1.7
date	98.11.09.18.21.10;	author root;	state Exp;
branches;
next	1.6;

1.6
date	92.07.30.12.09.41;	author se;	state Exp;
branches;
next	1.5;

1.5
date	92.07.08.18.44.34;	author se;	state Exp;
branches;
next	1.4;

1.4
date	92.05.17.13.16.24;	author se;	state Exp;
branches;
next	1.3;

1.3
date	92.02.13.21.01.15;	author se;	state Exp;
branches;
next	1.2;

1.2
date	92.02.13.14.37.45;	author se;	state Exp;
branches;
next	1.1;

1.1
date	92.02.13.14.23.32;	author se;	state Exp;
branches;
next	;


desc
@interface to read and write spectra from Ralf Wirowski's matrix sort 
programs.
@


1.7
log
@Definition of functions load_spec and save_spec now compatible with
declaration of prototypes.
@
text
@/*
 * specio.c:		Copyright 1992 by 
 *			Stefan Esser
 *			Institut for Nuclear Physics
 *			University of Cologne, Germany
 *
 */

#include "mfile.h"

static char rcsid[] = "$Id: specio.c,v 1.6 1992/07/30 12:09:41 se Exp root $";

int load_spec (name, buf, num)
     const char *name;
     unsigned long *buf;
     int num;
{
  int n;
  MFILE *mat;

  mat = mopen (name, "r");
  n = mget (mat, buf, 0, 0, 0, num);
  if (mclose (mat) != 0) return -1;
  return n;
}

int save_spec (name, buf, num)
     const char *name;
     unsigned long *buf;
     int num;
{
  int n;
  MFILE *mat;
  minfo info;
  
  mat = mopen (name, "w");

  mgetinfo (mat, &info);
  info.filetype = MAT_LC;
  info.levels   = 1;
  info.lines    = 1;
  info.columns  = num;
  msetinfo (mat, &info);

  n = mput (mat, buf, 0, 0, 0, num);
  if (mclose (mat) != 0) return -1;
  return n;
}

@


1.6
log
@added copyright note
@
text
@d11 1
a11 1
static char rcsid[] = "$Id: specio.c,v 1.5 1992/07/08 18:44:34 se Exp $";
d14 2
a15 2
     char *name;
     int *buf;
d28 2
a29 2
     char *name;
     int *buf;
@


1.5
log
@reestablished traditional function declarations for compatibility with
non ANSI compilers
@
text
@d1 8
d11 1
a11 1
static char rcsid[] = "$Id: specio.c,v 1.3 1992/02/13 21:01:15 se Exp $";
@


1.4
log
@removed unneccessary call of unlink()
@
text
@d5 4
a8 1
int load_spec (char *name, int *buf, int num)
d19 4
a22 1
int save_spec (char *name, int *buf, int num)
@


1.3
log
@delete output file before opening for write
set filetype as requested in the save_spec parameters
@
text
@d3 1
a3 1
static char rcsid[] = "$Id: specio.c,v 1.2 1992/02/13 14:37:45 se Exp $";
a21 2
  /* only because "w" not correctly implemented, yet ... */
  unlink (name);
@


1.2
log
@added rcsid[]
@
text
@d3 1
a3 1
static char rcsid[] = "$Id$";
d20 12
a32 1
  mat = mopen (name, "w");
@


1.1
log
@Initial revision
@
text
@a4 3
/* $Log$
 */

@
